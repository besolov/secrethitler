<template name="demogame">
  <div class="title-card">
    <h2 id="round" class="round show">
      {{_ 'round'}} <b class="orange">{{_ 'demo'}}</b>
    </h2>
    <h2 id ="access-code" class="access-code">
      {{_ 'access code'}}: <b>{{ room.accessCode }}</b>
    </h2>
  </div>

  <div class="hidden-role-container">
    <div class="toggle-role">{{_ 'show/hide'}}</div>
    <div id="hidden-role" class="hidden-info show">
      <h2 class="hidden-role">{{_ 'you\'re'}} <b>{{ role }}</b>!</h2>
    </div>
  </div>

  <p>
    <!-- <small>Testing remember to remove {{ policycount }}</small>
    <small>policy count</small>
    <br /> -->
    <div class="track-titles">
      <h3>{{_ 'Liberal'}}</h3>
      <h3>{{_ 'Fascist'}}</h3>
    </div>
    <div class="game-board">
      <div class="liberal-board-container">
        <div class="liberal-board">
          <div class="tile" id="liberal-1"></div>
          <div class="tile" id="liberal-2"></div>
          <div class="tile" id="liberal-3"></div>
          <div class="tile" id="liberal-4"></div>
          <div class="tile" id="liberal-5"></div>
        </div>
        {{ moveliberal room.liberal }}
      </div>
      <span class="board-divider">/</span>
      <div class="fascist-board-container">
        <div class="fascist-board">
          {{# each powericons }}
            <div class="tile" id="fascist-{{ id }}">
              <i class="{{ class }}" title="{{ title }}" aria-hidden="true"></i>
            </div>
          {{/ each }}
        </div>
        {{ movefascist room.fascist }}
      </div>
    </div>

    <div class="election-tracker-container">
      <div>{{_ 'failed elections'}}: {{ movetracker room.electiontracker }}</div>
      <div class="circle" id="tracker-1">1</div>
      <div class="circle" id="tracker-2">2</div>
      <div class="circle" id="tracker-3">3</div>
    </div>
  </p>

  <div class="policydeck">
    <small>{{_ 'draw pile'}}</small>
    <div class="draw pile"><small>{{room.drawpile.length}}</small></div>
    <span>|</span>
    <div class="discard pile"><small>{{room.discardpile.length}}</small></div>
    <small>{{_ 'discard pile'}}</small>
  </div>


  <hr class="mid-page-break">

  {{# if flashmessage }}
    <span class="enact-message">{{ room.trackerenact.message }}</span><br/>
  {{/ if }}

  {{# if equals room.fascist 5 }}
    <p>
      <small class="veto-unlocked"><i class="fa fa-gavel" aria-hidden="true"></i><span>{{_ 'veto power'}}</span> {{_ 'unlocked'}}!</small>
    </p>
  {{/ if }}

<!-- Dead or Alive -->
  {{# if dead }}
    <p>
      <b style="color: #BF3630;">{{_ 'you are dead_'}}</b><br />
      <span>{{_ 'Dead men tell no tales_ Shh___'}}</span>
    </p>
  {{/ if }}

<!-- chancellor-candidate picking view -->
  {{# if president }}
    <p>
      <span class="bold">{{_ 'Step 4'}}:</span> {{_ 'Game has begun'}} <b style="color: #1B6DB2;">{{_ 'you are the president!'}}</b><br />
    </p>
    {{# if picking }}
    <span style="color: #797F06;">{{_ 'choose your chancellor'}}:</span>
    {{/ if }}
  {{ else }}
    {{# if picking }}
      <p>{{_ 'waiting for the president to nominate a chancellor___'}}</p>
    {{/ if }}
  {{/ if }}

  {{# if chancellor }}
    <p>
      <b style="color: #797F06;">{{_ 'you are the chancellor!'}}</b><br />
    </p>
  {{/ if }}

  {{# if voting }}
  <div class="voting-annoucement">
    <b style="color: #1B6DB2;">{{ presidentname }}</b> {{_ 'has nominated'}}<br/>
    <b style="color: #797F06;">{{ chancellorname }}</b> {{_ 'as chancellor'}}
  </div>
    <p>
      {{_ 'waiting for'}} {{ votesleft }} {{ peopleOrperson votesleft }} {{_ 'to vote'}}<br />
      {{# unless dead }}
        {{# if haventvoted }}
          <button class="yesvote-button">{{_ 'yes'}}</button>
          <button class="novote-button">{{_ 'no'}}</button>
        {{/ if }}
      {{/ unless }}
    </p>
  {{/ if }}

  {{# if votefailed }}
    <div class="vote-reveal-container">
      <p>
        {{_ 'the vote failed___'}}<br />
        {{_ 'waiting on'}} {{ votecount }} {{ peopleOrperson votecount }}
      </p>
      <div class="toggle-reveal-vote">{{_ 'show/hide'}}</div>
      <ul id="reveal-votelist" class="playerlist votelist">
        {{# each ballot }}
          <li class="{{# if current }}current{{/ if }}">
            {{ name }}
            <span>({{ vote }})</span>
          </li>
        {{/ each }}
      </ul>
    </div>
    {{# unless dead }}
      {{# unless haventvoted }}
        <p><button id="btn-fail-continue" class="fail-continue-button">continue</button></p>
      {{/ unless }}
    {{/ unless}}
  {{/ if }}

<!-- Policy picking view / what everyone sees -->
  {{# if votepassed }}
    {{# if equals room.policychoices.length 3 }}
      <div class="vote-reveal-container">
        <p>{{_ 'the vote passed!'}}</p>
        <div class="toggle-reveal-vote">{{_ 'show/hide'}}</div>
        <ul id="reveal-votelist" class="playerlist votelist">
          {{# each ballot }}
            <li class="{{# if current }}current{{/ if }}">
              {{ name }}
              <span>({{ vote }})</span>
            </li>
          {{/ each }}
        </ul>
      </div>
    {{/ if }}
    <!-- president view -->
    {{# if president }}
      {{# if equals room.policychoices.length 3 }}
      <!-- Veto button appears after 5th fascist policy -->
        {{# if presidentvetobutton }}
          <button class="veto-button" data-veto="president" style="margin-top: 12px;">{{_ 'Veto'}}</button>
        {{/ if }}
        {{# if room.askchancellor }}
          <p>{{_ 'waiting for chancellor\'s veto approval___'}}</p>
        {{ else }}
      <!-- when president is policy picking -->
          {{# if vetopassed 2 }}
            <p>{{_ 'chancellor approved of the veto'}}</p>
            <button id="btn-pvc" class="president-veto-continue">{{_ 'continue'}}</button>
          {{ else }}
            {{# if vetofailed 2 }}
              <p>{{_ 'Chancellor did not approve on Veto'}}</p>
            {{/ if }}
            <p>{{_ 'choose a policy to'}} <strong>{{_ 'discard'}}</strong></p>
            <p>
              {{# each policy in room.policychoices }}
              <button class="pick-{{ policy }}">{{ policy }}</button>
              {{/ each }}
            </p>
          {{/ if }}
        {{/ if }}
      <!-- when chancellor is picking policy aka policychoices.length = 2 -->
      {{ else }}
        {{# unless executiveaction }}
          {{# if room.askpresident }}
            <p>Chancellor wants to Veto</p>
            <p>Do you approve?</p>
            <button class="yes-veto" data-veto="president">{{_ 'yes'}}</button>
            <button class="no-veto" data-veto="president">{{_ 'no'}}</button>
          {{ else }}
            <p>{{_ 'waiting for the chancellor to discard a policy___'}}</p>
          {{/ if }}
        {{/ unless }}
      {{/ if }}
  <!-- End president policy picking view -->
    {{ else }}
    <!-- chancellor view -->
      {{# if chancellor }}
      <!-- during veto power, president seeking approval -->
        {{# if equals room.policychoices.length 3 }}
          {{# if room.askchancellor }}
            <p>{{_ 'President wants to Veto'}}</p>
            <p>{{_ 'Do you approve?'}}</p>
            <button class="yes-veto" data-veto="chancellor">{{_ 'yes'}}</button>
            <button class="no-veto" data-veto="chancellor">{{_ 'no'}}</button>
          {{ else }}
            <p>{{_ 'waiting for the president to discard a policy___'}}</p>
          {{/ if }}
        {{/ if }}
      <!-- normal policy discard view -->
        {{# if equals room.policychoices.length 2 }}
          {{# if chancellorvetobutton }}
            <button class="veto-button" data-veto="chancellor">{{_ 'Veto'}}</button>
          {{/ if }}
          {{# if room.askpresident }}
            <p>{{_ 'waiting for president\'s veto approval___'}}</p>
          {{ else }}
            {{# if vetopassed 1 }}
              <p>{{_ 'President approved_ Policies will be discarded_'}}</p>
              <button id="btn-cvc" class="chancellor-veto-continue">{{_ 'continue'}}</button>
            {{ else }}
              {{# if vetofailed 1 }}
                <p>{{_ 'President did not approve with Veto'}}</p>
              {{/ if }}
              <p>{{_ 'choose a policy to'}} <strong>{{_ 'discard'}}</strong></p>
              <p>
                {{# each policy in room.policychoices }}
                <button class="pick-{{ policy }}">{{ policy }}</button>
                {{/ each }}
              </p>
            {{/ if }}
          {{/ if }}
        {{/ if }}
    <!-- everyone else's view -->
      {{ else }}
        {{# if equals room.policychoices.length 3 }}
          {{# if room.askchancellor }}
            <p>{{_ 'president has veto\'d, waiting for chancellor\'s approval___'}}</p>
          {{ else }}
            <p>{{_ 'waiting for the president to discard a policy___'}}</p>
          {{/ if }}
        {{ else }}
        <!-- if executive power is live and president is deciding on how to use power -->
          {{# unless executiveaction }}
            {{# if room.askpresident }}
              <p>{{_ 'chancellor has veto\'d, waiting for president\'s approval___'}}</p>
            {{ else }}
              <p>{{_ 'waiting for the chancellor to discard a policy___'}}</p>
            {{/ if }}
          {{/ unless }}
        {{/ if }}
      {{/ if }}
    {{/ if }}
  {{/ if }}

  <!-- Executive Action View -->
  {{# if executiveaction }}
    {{# if president }}

    <!-- Execution -->
    {{# if room.assassination }}
      <p>{{_ 'Execution_ Who do you want to execute?'}}</p>
    {{/ if }}
    <!-- End of execution -->

    <!-- Call Special Election -->
      {{# if room.specialelection }}
        <p>{{_ 'Special Election_ Choose the next President_'}}</p>
      {{/ if }}
    <!-- End of Special Election -->

    <!-- Investigate Loyalty -->
      {{# if room.investigate }}
        <p>{{_ 'Who do you want to investigate'}}</p>
        {{# each suspect in room.suspects}}
          <button class="suspect" data-suspectid="{{ suspect.playerId }}">
            {{ suspect.name }}
          </button>
        {{/ each }}
      {{/ if  }}
      {{# if room.reveal }}
        <p>{{_ 'Investigation Result:'}}</p>
        <ul class="playerlist">
          {{# each suspect in room.suspected }}
            <li>
              {{ suspect.name }}
              <span>({{ partymembership suspect }})</span>
            </li>
          {{/ each }}
        </ul>
        <p><button id="btn-investigate-continue" class="investigate-continue-button">{{_ 'continue'}}</button></p>
      {{/ if }}
    <!-- End of Investigate Loyalty -->

    <!-- Policy Peek -->
      {{# if equals room.peek.length 3 }}
        <p>{{_ 'Here are the next three Policies'}}</p>
        <p>
          {{# each policy in room.peek }}
            <button>{{ policy }}</button>
          {{/ each }}
        </p>
        <p><button id="btn-peek-continue" class="peek-continue-button">{{_ 'continue'}}</button></p>
      {{/ if }}
    <!-- End of policy peek -->

    {{ else }}
      <!-- everyone else's view while President is using Presidential Power -->
      {{# if room.assassination }}
        <p>
          <b>{{_ 'Execution_'}}</b><br />
          <span>{{_ 'President choosing who to execute___'}}</span>
        </p>
      {{/ if }}
      {{# if room.specialelection }}
        <p>
          <b>{{_ 'Call Special Election_'}}</b><br />
          <span>{{_ 'President choosing the next President___'}}</span>
        </p>
      {{/ if }}
      {{# if room.investigate }}
        <p>
          <b>{{_ 'Investigate Loyalty_'}}</b><br />
          <span>{{_ 'President is investigating someone\'s party membership___'}}</span>
        </p>
      {{/ if }}
      {{# if equals room.peek.length 3 }}
        <p>
          <b>{{_ 'Policy Peek_'}}</b><br />
          <span>{{_ 'President is examining the top three policy cards___'}}</span>
        </p>
      {{/ if }}
    {{/ if }}

    <!-- Death Announcement -->
    {{# if room.playerdied }}
      {{# if president }}
        <p>{{_ 'You\'ve chosen to execute'}} {{ gravestonename }}</p>
        <p><button id="btn-execution-continue" class="execution-continue-button">{{_ 'continue'}}</button></p>
      {{ else }}
        {{# if newlydeceased }}
        <p>{{_ 'You died_ Sorry_'}}</p>
        {{ else }}
        <p>
          {{ gravestonename }} {{_ 'has been executed_'}}<br />
        </p>
        {{/ if }}
      {{/ if }}
    {{/ if }}
    <!-- End of death announcement -->

  {{/ if }}
  <!-- End of Executive action view -->
  {{# if enddemo }}
    <p>{{_ 'This concludes the demo'}}</p>
    <p>{{_ 'Go grab some friends and start a new game'}}<br/>
      {{_ 'Have fun!'}}</p>
    <button class="demo-button endgame-button">{{_ 'end demo'}}</button>
  {{/ if }}

  <ul class="ring circle-container-{{ players.length }}">
      {{# each players }}
        <li data-playerid={{ playerId }}>
          <span class={{ playercircle playerId }}>{{ name }}</span>
        </li>
      {{/ each }}
  </ul>

  <!-- Color Key Dropdown -->
  <div class="color-key-container">
    <button class="button-color-key">{{_ 'Color Key'}}</button><br />
    <div id="color-key" class="color-key-dropdown">
      <li><i class="fa fa-circle-o fa-lg key-p" aria-hidden="true"></i><span class="key-p">{{_ 'president'}}</span></li>
      <li><i class="fa fa-circle-o fa-lg key-ep" aria-hidden="true"></i><span class="key-ep">{{_ 'eligible presidential candidates'}}</span></li>
      <li><i class="fa fa-circle-o fa-lg key-c" aria-hidden="true"></i><span class="key-c">{{_ 'chancellor'}}</span></li>
      <li><i class="fa fa-circle-o fa-lg key-ec" aria-hidden="true"></i><span class="key-ec">{{_ 'eligible chancellor candidates'}}</span></li>
      <li><i class="fa fa-circle-o fa-lg key-et" aria-hidden="true"></i><span class="key-et">{{_ 'execution targets'}}</span></li>
      <li><i class="fa fa-circle-o fa-lg key-d" aria-hidden="true"></i><span class="key-d">{{_ 'dead'}}</span></li>
    </div>
  </div>

  <!-- Presidential Power dropdown menu -->
  <button class="powers-button">{{_ 'Presidential Powers'}}</button>
  <div class="presidential-powers" id="dropdown-menu">
    {{# each powers }}
      <li class ="power-name" data-powerid={{ id }}>
        <i class="{{ icon }}" aria-hidden="true"></i>{{ name }}
      </li>
      <p style="width:85%" class="power-description show" id="power-description-{{ id }}">{{ description }}</p>
    {{/ each }}
  </div>

  <!-- Win Condition dropdown -->
  <div class="win-condition-container">
    <button class="btn-win-condition">{{_ 'Win Condition'}}</button>
    <div id="win-condition" class="win-condition-dropdown">
      <div>
        <h3><span style="color: #03AA8C;">{{_ 'Liberal'}}</span> {{_ 'Team win if either'}}:</h3>
        <li>{{_ 'Five Liberal Policies are enacted'}}</li>
        <span class="or">{{_ 'OR'}}</span>
        <li>{{_ 'Hitler is assassinated'}}</li>
      </div>
      <div>
        <h3><span style="color: #f76b36;">{{_ 'Fascist'}}</span> {{_ 'Team win if either'}}:</h3>
        <li>{{_ 'Six Fascist Policies are enacted'}}</li>
        <span class="or">{{_ 'OR'}}</span>
        <li>{{_ 'Hitler is elected Chancellor any time after the third Fascist Policy has been enacted'}}</li>
      </div>
    </div>
  </div>

  {{# if owner }}
  <hr>
  <p>
    <button class="endgame-button">{{_ 'end demo'}}</button>
  </p>
  {{/ if }}
</template>
